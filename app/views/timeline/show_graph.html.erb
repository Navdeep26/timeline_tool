<style type="text/css">
  .gtasktableh{
    width: 100%;
  }
  .gtasktable{
    width: 100%;
  }
  /*.form-control{
    width: 49% !important;
  }*/
  .fixed-width{
    width: 100%;
    height: 7rem;
    background: blue;
    color: white;
    margin: 0;
    margin-bottom: 2rem;
  }

  .gselector{
    font-size: 1.1rem !important;
  }

  .gtaskheading{
    font-size: 1.1rem !important;
  }

  .none{
    display: none;
  }

  .gtaskname div, .gtaskname {
    min-width: 170px;
    max-width: 170px;
    width: 170px;
    font-size: 11px !important;
    border-left: none;
}

table, th, td {
   border: 0.1rem solid #a0a3a4 !important;
}

.ggroupblack{
  background: rgb(94, 151, 246) !important;
  height: 1rem !important;
  border-radius: 2px !important ;
} 

td.gtaskcell {
  height: 3rem !important ;
}

.ggroupitem{
  height: 3rem !important ;
  margin-bottom: 5px !important ;
}

</style>

<%= javascript_include_tag "jsgantt.js" %>
<!-- <link rel="stylesheet" href="jsgantt.css"> -->
<script src="/assets/jsgantt.js"></script>

<link href="/assets/jsgantt.css" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- <script src="jsgantt.js" type="text/javascript"></script> -->


<div style="position:relative" class="gantt" id="GanttChartDIV"></div>
<script>
  // var task_id = "1"
  // var task_name = "first task"
  // var start_date_day = "20"
  // var start_date_month = "02"
  // var start_date_year = "2018"
  // var end_date_day = "20"
  // var end_date_month = "02"
  // var end_date_year = "2018"
  var g = new JSGantt.GanttChart(document.getElementById('GanttChartDIV'), 'day');
  if( g.getDivId() != null ) {
g.setCaptionType('Complete');
g.setQuarterColWidth(36);
g.setDateTaskDisplayFormat('day dd month yyyy');
g.setDayMajorDateDisplayFormat('mon yyyy - Week ww');
g.setWeekMinorDateDisplayFormat('dd mon');
g.setShowTaskInfoLink(1);
g.setShowEndWeekDate(0);
g.setUseSingleCell(10000);
g.setFormatArr('Day', 'Week', 'Month');
g.setShowTaskInfoRes(0);
g.setShowEndDate(1);
g.setShowRes(0);
g.setShowComp(0);
g.setShowDur(0);

<% all_timeline = Timeline.all %>
<% all_timeline.each do |timeline| %>
        var task_id = <%= timeline.id %>;
        var task_name = "<%= timeline.name %>"
        var task_desc = "<%= timeline.description %>"
        var start_date_month = "<%= timeline.start_date.split('/').first %>"
        var start_date_day = "<%= timeline.start_date.split('/').second %>"
        var start_date_year = "<%= timeline.start_date.split('/').last %>"
        <% if timeline.end_date.present? %>
          var end_date_month = "<%= timeline.end_date.split('/').first %>"
          var end_date_day = "<%= timeline.end_date.split('/').second %>"
          var end_date_year = "<%= timeline.end_date.split('/').last %>"
        <% else  %> 

        <% end %> 
  g.AddTaskItem(new JSGantt.TaskItem(task_id,   task_name,     start_date_year + "-" + start_date_month + "-" + start_date_day,           end_date_year + "-" + end_date_month + "-" + end_date_day,          'ggroupblack',  '',       0, '',    0,   1, 0,  1,     '',      '',      task_desc , g));
<% end %>

g.Draw();
}
</script>

<div class="modal fade" id="destroy_timeline_modal" role="dialog">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Delete</h4>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete</p>
      </div>
      <div class="modal-footer">
        <button  type="button" data-id="" class="btn btn-primary confirm_delete">yes</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
      </div>
    </div>
  </div>
</div>

<div id="myModall" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Timeline Tools</h4>
      </div>
      <div class="modal-body timeline_form">
        <!-- <p>Some text in the modal.</p> -->
      </div>
      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
      </div>
    </div>

  </div>
</div>

<div class="show_graph_container" ></div>

<script type="text/javascript">
 $(document).delegate('.ggroupitem', 'dblclick', function(){
  // $('.ggroupitem').dblclick(function(){
   var id = $(this).attr('id')
   var task_id = id.split('_')[1];
   $.post("timeline/edit",
    {
        task_id: task_id,
    },
    function(data, status){
        $('.timeline_form').html(data);
        $('#myModall').modal('show')
        // alert("Data: " + data + "\nStatus: " + status);
    });
  })
</script>

<script type="text/javascript">
  $(document).ready(function(){
    debugger
    $('.gfoldercollapse').addClass('none');
    $('.ggroupblackendpointleft').addClass('none');
    $('.ggroupblackendpointright').addClass('none');
  })
</script>